{% extends "dashboard_layout.html" %}
{% block body %}

<!-- ===== Hero / Page Header ===== -->
<header class="masthead mb-0 text-white"
    style="background-image: url('/static/assets/img/home-bg.jpg');
           background-size: cover;
           background-position: center;
           height: 60vh;
           display: flex;
           align-items: center;
           justify-content: center;
           position: relative;">
    <div class="overlay position-absolute top-0 start-0 w-100 h-100"
        style="background: rgba(0, 0, 0, 0.55);"></div>
    <div class="container position-relative text-center">
        <h1 class="display-4 fw-bold">Author Panel</h1>
        <p class="lead fst-italic"><span class="subheading">Manage your posts and change them</span></p>
    </div>
</header>

<!-- ===== Modern Content Section ===== -->
<div class="main-content-wrapper">
    <div class="container px-4 px-lg-5 mt-5 mb-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-7">

                <!-- Flash Messages -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                {% for category, message in messages %}
                <div class="alert alert-{{ category }} alert-dismissible fade show shadow-sm border-0 rounded-3" role="alert">
                    <i class="bi bi-info-circle me-2"></i> {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endfor %}
                {% endif %}
                {% endwith %}

                <!-- Actions Card -->
                <div class="card shadow-lg border-0 rounded-4 mb-5 p-4 bg-light" style="transition: all 0.4s ease;">
                    <h2 class="fw-bold mb-4 text-primary text-center">Basic Actions</h2>
                    <div class="d-flex justify-content-center mb-3">
                        <a href="/edit/0">
                            <button class="btn btn-primary btn-lg px-4 py-2 rounded-3 shadow-sm transition-all">Add a New Post</button>
                        </a>
                    </div>
                </div>

                <!-- Upload Section -->
                <div class="card shadow-sm border-0 rounded-4 mb-5 bg-light">
                    <div class="card-body p-4">
                        <h3 class="fw-semibold mb-3 text-primary">
                            <i class="fas fa-upload me-2"></i> Upload a File
                        </h3>
                        <form action="/uploader" method="post" enctype="multipart/form-data"
                            class="d-flex flex-column flex-md-row align-items-center gap-3">
                            <input type="file" name="file1" class="form-control" style="max-width: 300px;">
                            <button class="btn btn-primary px-4 py-2 rounded-3 shadow-sm" type="submit">
                                <i class="fas fa-paper-plane me-1"></i> Upload
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Edit Posts Section -->
                <div class="card shadow-sm border-0 rounded-4 bg-light">
                    <div class="card-body p-4">
                        <h3 class="fw-semibold mb-3 text-success">
                            <i class="fas fa-edit me-2"></i> Edit Posts
                        </h3>
                        <div class="table-responsive">
                            <table class="table align-middle table-hover">
                                <thead class="table-dark text-center">
                                    <tr>
                                        <th>Sno</th>
                                        <th>Title</th>
                                        <th>Date</th>
                                        <th>Edit</th>
                                        <th>Delete</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for post in posts %}
                                    <tr class="text-center">
                                        <td>{{post.sno}}</td>
                                        <td class="fw-medium">{{post.title}}</td>
                                        <td>{{post.date}}</td>
                                        <td>
                                            <a href="/edit/{{ post.sno }}">
                                                <button class="btn btn-sm btn-outline-primary rounded-pill px-3 transition">
                                                    <i class="fas fa-pen me-1"></i> Edit
                                                </button>
                                            </a>
                                        </td>
                                        <td>
                                            <a href="/delete/{{ post.sno }}">
                                                <button class="btn btn-sm btn-outline-danger rounded-pill px-3 transition">
                                                    <i class="fas fa-trash me-1"></i> Delete
                                                </button>
                                            </a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- ===== Custom Styling & Transitions ===== -->
<style>
    /* Full background for entire page */
    body {
        background-image: url('/static/assets/img/home-bg.jpg');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        background-repeat: no-repeat;
    }

    /* Optional subtle overlay for readability */
    .main-content-wrapper {
        /*background-color: rgba(255, 255, 255, 0.88);*/
        backdrop-filter: blur(2px);
        padding-top: 40px;
        padding-bottom: 40px;
    }

    .card {
    background-color: rgba(248, 249, 250, 0.85) !important; /* 0.85 = 85% opaque */
    transition: all 0.3s ease-in-out;
    backdrop-filter: blur(5px); /* optional: adds a subtle blur behind */
}


    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
        background-color: #ffffff !important;
    }

    .btn {
        transition: all 0.3s ease;
    }

    .btn:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 15px rgba(13, 110, 253, 0.4);
    }

    .table-row-hover:hover {
        background-color: rgba(13, 110, 253, 0.05);
        transition: background-color 0.3s ease;
    }

    .table th {
        color: #0d6efd;
        font-weight: 600;
    }

    .alert {
        animation: fadeIn 0.6s ease-in-out;
    }

    @keyframes fadeIn {
        from {opacity: 0; transform: translateY(-10px);}
        to {opacity: 1; transform: translateY(0);}
    }
</style>

{% endblock %}
